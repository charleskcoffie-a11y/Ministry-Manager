import{c as U,r,j as e,B as w,d as k,X as S,H as $}from"./index-BgenSf1I.js";import{s as n}from"./supabaseClient-Cz1ETm7S.js";import{s as z}from"./geminiService-C5glO8G0.js";import{S as u}from"./sparkles-Bk1v75TG.js";import{P as C}from"./plus-CoBEYjcu.js";import{P as B}from"./pen-fwoSi4HJ.js";import{T as H}from"./trash-2-9s6o-Ntw.js";import{M as V}from"./mic-vocal-DrV5P_AK.js";import{U as G}from"./users-QjNeGH5e.js";import{U as J}from"./user-CV3XbVfC.js";import{B as Q}from"./book-open-BBJSTkJm.js";/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],h=U("calendar-clock",W),X=["Sermon Preparation","Visitation","Counseling","Prayer & Fasting","Meeting","Personal Devotion","Other"],Y=["One-time","Daily","Weekly","Monthly","Yearly"],ce=()=>{const[_,M]=r.useState([]),[O,p]=r.useState(!0),[c,f]=r.useState("active"),[R,d]=r.useState(!1),[s,i]=r.useState({title:"",category:"Personal Devotion",frequency:"One-time",start_date:new Date().toISOString().slice(0,16),notes:"",is_active:!0}),[A,y]=r.useState(!1),[b,m]=r.useState([]),[P,j]=r.useState(!1);r.useEffect(()=>{o()},[]);const o=async()=>{p(!0);const{data:t,error:a}=await n.from("reminders").select("*").order("start_date",{ascending:!0});t&&!a&&M(t),p(!1)},D=async t=>{if(t.preventDefault(),!s.title)return;const a={...s};if(s.id){const{error:l}=await n.from("reminders").update(a).eq("id",s.id);l||o()}else{const{error:l}=await n.from("reminders").insert([a]);l||o()}x()},q=async t=>{if(!confirm("Delete this reminder?"))return;const{error:a}=await n.from("reminders").delete().eq("id",t);a||o()},I=async t=>{const{error:a}=await n.from("reminders").update({is_active:!t.is_active}).eq("id",t.id);a||o()},v=()=>{i({title:"",category:"Sermon Preparation",frequency:"One-time",start_date:new Date().toISOString().slice(0,16),notes:"",is_active:!0}),d(!0)},E=t=>{i({...t,start_date:new Date(t.start_date).toISOString().slice(0,16)}),d(!0)},x=()=>{d(!1),i({})},L=async()=>{y(!0),j(!0),m([]);try{const{data:t}=await n.from("tasks").select("*").limit(10),{data:a}=await n.from("church_programs").select("*").limit(5),l=JSON.stringify({tasks:t||[],programs:a||[],current_date:new Date().toISOString()}),g=await z(l);m(g)}catch(t){console.error("AI Suggestion failed",t)}j(!1)},T=async t=>{const{error:a}=await n.from("reminders").insert([{...t,is_active:!0}]);a||(m(l=>l.filter(g=>g!==t)),o())},F=t=>{switch(t){case"Sermon Preparation":return e.jsx(Q,{className:"w-5 h-5 text-indigo-500"});case"Visitation":return e.jsx(J,{className:"w-5 h-5 text-green-500"});case"Counseling":return e.jsx($,{className:"w-5 h-5 text-pink-500"});case"Prayer & Fasting":return e.jsx(u,{className:"w-5 h-5 text-purple-500"});case"Meeting":return e.jsx(G,{className:"w-5 h-5 text-blue-500"});case"Personal Devotion":return e.jsx(V,{className:"w-5 h-5 text-amber-500"});default:return e.jsx(w,{className:"w-5 h-5 text-gray-400"})}},N=_.filter(t=>c==="active"?t.is_active:!t.is_active);return e.jsxs("div",{className:"max-w-6xl mx-auto pb-12 animate-fade-in",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-bold text-gray-800 flex items-center gap-3",children:[e.jsx(w,{className:"w-10 h-10 text-primary"}),"Pastoral Reminders"]}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Manage spiritual habits, ministry duties, and recurring events."})]}),e.jsxs("div",{className:"flex gap-3 w-full md:w-auto",children:[e.jsxs("button",{onClick:L,className:"flex items-center justify-center gap-2 px-4 py-3 bg-purple-100 text-purple-700 rounded-xl hover:bg-purple-200 font-medium transition-colors flex-1 md:flex-none",children:[e.jsx(u,{className:"w-5 h-5"})," AI Suggest"]}),e.jsxs("button",{onClick:v,className:"flex items-center justify-center gap-2 px-5 py-3 bg-primary text-white rounded-xl hover:bg-blue-700 font-medium transition-colors shadow-sm flex-1 md:flex-none",children:[e.jsx(C,{className:"w-5 h-5"})," Add Reminder"]})]})]}),e.jsxs("div",{className:"flex gap-4 mb-6 border-b border-gray-200",children:[e.jsx("button",{onClick:()=>f("active"),className:`pb-3 text-sm font-semibold transition-colors ${c==="active"?"text-primary border-b-2 border-primary":"text-gray-500 hover:text-gray-700"}`,children:"Active Reminders"}),e.jsx("button",{onClick:()=>f("inactive"),className:`pb-3 text-sm font-semibold transition-colors ${c==="inactive"?"text-gray-800 border-b-2 border-gray-800":"text-gray-500 hover:text-gray-700"}`,children:"Inactive / Archived"})]}),O?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(k,{className:"w-10 h-10 animate-spin text-gray-300"})}):N.length===0?e.jsxs("div",{className:"text-center py-20 bg-gray-50 rounded-2xl border border-dashed border-gray-200",children:[e.jsx(h,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"No reminders found."}),e.jsx("button",{onClick:v,className:"text-primary hover:underline mt-2",children:"Create one now"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(t=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-all p-5 group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gray-50 rounded-lg",children:F(t.category)}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider block",children:t.category}),e.jsx("h3",{className:"font-bold text-gray-800 leading-tight",children:t.title})]})]}),e.jsx("div",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${t.frequency==="One-time"?"bg-gray-100 text-gray-600":"bg-blue-50 text-blue-600"}`,children:t.frequency})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-2 mb-1",children:[e.jsx(h,{className:"w-4 h-4 text-gray-400"}),new Date(t.start_date).toLocaleString(void 0,{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),t.notes&&e.jsx("p",{className:"text-sm text-gray-500 italic truncate mt-2",children:t.notes})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-50",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-500 cursor-pointer select-none",children:[e.jsx("div",{onClick:()=>I(t),className:`w-10 h-6 rounded-full p-1 transition-colors ${t.is_active?"bg-green-500":"bg-gray-300"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transform transition-transform ${t.is_active?"translate-x-4":""}`})}),t.is_active?"Active":"Paused"]}),e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>E(t),className:"p-2 hover:bg-gray-100 rounded-lg text-gray-500 hover:text-blue-600",children:e.jsx(B,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>q(t.id),className:"p-2 hover:bg-red-50 rounded-lg text-gray-500 hover:text-red-600",children:e.jsx(H,{className:"w-4 h-4"})})]})]})]},t.id))}),R&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-fade-in",children:e.jsx("div",{className:"bg-white w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden",children:e.jsxs("form",{onSubmit:D,children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800",children:s.id?"Edit Reminder":"New Reminder"}),e.jsx("button",{type:"button",onClick:x,className:"text-gray-400 hover:text-gray-600",children:e.jsx(S,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Title"}),e.jsx("input",{required:!0,className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 focus:ring-2 focus:ring-primary outline-none",placeholder:"e.g. Prepare Sermon Slides",value:s.title,onChange:t=>i({...s,title:t.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Category"}),e.jsx("select",{className:"w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-primary outline-none bg-white",value:s.category,onChange:t=>i({...s,category:t.target.value}),children:X.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Frequency"}),e.jsx("select",{className:"w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-primary outline-none bg-white",value:s.frequency,onChange:t=>i({...s,frequency:t.target.value}),children:Y.map(t=>e.jsx("option",{value:t,children:t},t))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Start Date & Time"}),e.jsx("input",{type:"datetime-local",className:"w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-primary outline-none",value:s.start_date,onChange:t=>i({...s,start_date:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Notes (Optional)"}),e.jsx("textarea",{rows:3,className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 focus:ring-2 focus:ring-primary outline-none resize-none",placeholder:"Add specific details...",value:s.notes||"",onChange:t=>i({...s,notes:t.target.value})})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:x,className:"px-5 py-2.5 text-gray-600 font-medium hover:bg-gray-200 rounded-xl transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-5 py-2.5 bg-primary text-white font-medium hover:bg-blue-700 rounded-xl transition-colors shadow-sm",children:"Save"})]})]})})}),A&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gradient-to-r from-purple-50 to-white",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"w-6 h-6 text-purple-600"}),e.jsx("h3",{className:"font-bold text-lg text-gray-800",children:"AI Suggested Reminders"})]}),e.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(S,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto flex-1 bg-gray-50/50",children:P?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(k,{className:"w-10 h-10 animate-spin text-purple-500 mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Analyzing schedule and tasks..."})]}):b.length===0?e.jsx("div",{className:"text-center py-10",children:e.jsx("p",{className:"text-gray-500",children:"No suggestions found. Try adding more tasks first."})}):e.jsx("div",{className:"space-y-4",children:b.map((t,a)=>e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm hover:border-purple-200 transition-colors flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs font-bold text-purple-600 bg-purple-50 px-2 py-0.5 rounded",children:t.category}),e.jsxs("span",{className:"text-xs text-gray-400",children:["â€¢ ",t.frequency]})]}),e.jsx("h4",{className:"font-bold text-gray-800 text-lg",children:t.title}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t.notes}),e.jsxs("div",{className:"text-xs text-gray-400 mt-2 flex items-center gap-1",children:[e.jsx(h,{className:"w-3 h-3"}),"Suggested: ",new Date(t.start_date).toLocaleString()]})]}),e.jsx("button",{onClick:()=>T(t),className:"self-center bg-gray-100 hover:bg-green-100 hover:text-green-700 text-gray-600 p-3 rounded-full transition-colors",title:"Add to Reminders",children:e.jsx(C,{className:"w-6 h-6"})})]},a))})})]})})]})};export{ce as default};
