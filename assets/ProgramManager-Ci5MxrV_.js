import{c as _,r as l,j as e,a as b,X as U,M as X}from"./index-DjP7dUMH.js";import{s as u}from"./supabaseClient-B6bhcLjp.js";import{P as O}from"./plus-CI59d7vJ.js";import{F as $}from"./funnel-BwZC0Fe8.js";import{C as G}from"./circle-x-DvDu8moa.js";import{S as J}from"./search-zNlIoLwv.js";import{C}from"./chevron-down-BmpbcB0g.js";import{C as S}from"./calendar-days-Ztg5igCi.js";import{P as D}from"./pen-Cr_kg-zM.js";import{T as M}from"./trash-2-BcME0Dqw.js";import{M as L}from"./map-pin-CD9Y0iKc.js";import{S as K}from"./save-Co8uzR3l.js";import{H as Q}from"./heart-Xu3yB2f0.js";import{B as W}from"./book-open-C5XuwULu.js";import{U as Y}from"./users-DHmUf-Hv.js";import{M as Z}from"./mic-vocal-Cek0Jw-E.js";/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],te=_("briefcase",ee);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],ae=_("coffee",se),ve=()=>{const[n,A]=l.useState([]),[E,f]=l.useState(!0),[h,g]=l.useState(""),[d,j]=l.useState(""),[x,v]=l.useState(""),[o,N]=l.useState(""),[c,w]=l.useState(""),[P,i]=l.useState(!1),[s,r]=l.useState({});l.useEffect(()=>{m()},[]);const m=async()=>{f(!0);const{data:t,error:a}=await u.from("church_programs").select("*").order("date",{ascending:!0});!a&&t&&A(t),f(!1)},F=async()=>{if(!(!s.date||!s.activity_description)){if(s.id){const{error:t}=await u.from("church_programs").update(s).eq("id",s.id);t||m()}else{const{error:t}=await u.from("church_programs").insert([s]);t||m()}i(!1),r({})}},y=async t=>{if(!window.confirm("Are you sure?"))return;const{error:a}=await u.from("church_programs").delete().eq("id",t);a||m()},k=t=>{const a=t.toLowerCase();return a.match(/worship|choir|hymn|praise|song/)?e.jsx(X,{className:"w-4 h-4 text-pink-500"}):a.match(/meeting|committee|board|council/)?e.jsx(te,{className:"w-4 h-4 text-slate-500"}):a.match(/prayer|vigil|fasting/)?e.jsx(Q,{className:"w-4 h-4 text-red-500"}):a.match(/bible|study|class|training|seminar/)?e.jsx(W,{className:"w-4 h-4 text-indigo-500"}):a.match(/youth|fellowship|teen|children/)?e.jsx(Y,{className:"w-4 h-4 text-orange-500"}):a.match(/food|lunch|dinner|breakfast/)?e.jsx(ae,{className:"w-4 h-4 text-amber-600"}):a.match(/preach|sermon/)?e.jsx(Z,{className:"w-4 h-4 text-purple-600"}):e.jsx(S,{className:"w-4 h-4 text-blue-500"})},V=l.useMemo(()=>Array.from(new Set(n.map(t=>t.venue).filter(Boolean))).sort(),[n]),B=l.useMemo(()=>Array.from(new Set(n.map(t=>t.lead).filter(Boolean))).sort(),[n]),p=n.filter(t=>{const a=t.activity_description.toLowerCase().includes(h.toLowerCase()),H=d?t.venue===d:!0,z=x?t.lead===x:!0,I=o?t.date>=o:!0,R=c?t.date<=c:!0;return a&&H&&z&&I&&R}),q=()=>{g(""),j(""),v(""),N(""),w("")},T=h||d||x||o||c;return e.jsxs("div",{className:"max-w-[1600px] mx-auto pb-24 animate-fade-in space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-6 bg-gradient-to-r from-blue-50 via-white to-blue-50 p-6 md:p-8 rounded-3xl border border-blue-100 shadow-sm",children:[e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"bg-blue-100 text-blue-700 p-2 rounded-lg",children:e.jsx(b,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-sm font-bold text-blue-800 uppercase tracking-widest",children:"Ministry Dashboard"})]}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 tracking-tight mb-2",children:"Program Schedule"}),e.jsx("p",{className:"text-slate-500 text-lg",children:"Church Programs · Events · Ministry Activities"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full md:w-auto items-start md:items-center",children:[e.jsxs("div",{className:"text-xs md:text-sm text-slate-500 bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 leading-snug",children:["CSV import/export is available in ",e.jsx("span",{className:"font-semibold text-slate-700",children:"Settings → Programs"}),"."]}),e.jsxs("button",{onClick:()=>{r({}),i(!0)},className:"flex-1 md:flex-none flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-full hover:bg-blue-700 shadow-md hover:shadow-lg font-semibold transition-all transform hover:-translate-y-0.5",children:[e.jsx(O,{className:"w-5 h-5"})," Add Event"]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider flex items-center gap-2",children:[e.jsx($,{className:"w-4 h-4"})," Filter Programs"]}),T&&e.jsxs("button",{onClick:q,className:"text-xs font-bold text-rose-500 hover:text-rose-700 flex items-center gap-1 bg-rose-50 px-3 py-1 rounded-full",children:[e.jsx(G,{className:"w-3 h-3"})," Clear Filters"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4",children:[e.jsxs("div",{className:"md:col-span-4 relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(J,{className:"h-5 w-5 text-slate-400 group-focus-within:text-blue-500 transition-colors"})}),e.jsx("input",{type:"text",placeholder:"Search activity...",className:"w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 bg-slate-50 focus:bg-white transition-all outline-none text-slate-700",value:h,onChange:t=>g(t.target.value)})]}),e.jsxs("div",{className:"md:col-span-2 relative group",children:[e.jsx("input",{type:"date",className:"w-full px-3 py-3 rounded-xl border border-slate-200 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 bg-slate-50 focus:bg-white text-sm text-slate-700 outline-none",value:o,onChange:t=>N(t.target.value)}),!o&&e.jsx("span",{className:"absolute right-3 top-3.5 pointer-events-none text-slate-400 text-xs",children:"From"})]}),e.jsxs("div",{className:"md:col-span-2 relative group",children:[e.jsx("input",{type:"date",className:"w-full px-3 py-3 rounded-xl border border-slate-200 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 bg-slate-50 focus:bg-white text-sm text-slate-700 outline-none",value:c,onChange:t=>w(t.target.value)}),!c&&e.jsx("span",{className:"absolute right-3 top-3.5 pointer-events-none text-slate-400 text-xs",children:"To"})]}),e.jsxs("div",{className:"md:col-span-2 relative",children:[e.jsxs("select",{className:"w-full pl-3 pr-8 py-3 rounded-xl border border-slate-200 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 appearance-none bg-slate-50 focus:bg-white text-sm outline-none text-slate-700",value:d,onChange:t=>j(t.target.value),children:[e.jsx("option",{value:"",children:"Venue: All"}),V.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsx(C,{className:"absolute right-3 top-3.5 h-4 w-4 text-slate-400 pointer-events-none"})]}),e.jsxs("div",{className:"md:col-span-2 relative",children:[e.jsxs("select",{className:"w-full pl-3 pr-8 py-3 rounded-xl border border-slate-200 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 appearance-none bg-slate-50 focus:bg-white text-sm outline-none text-slate-700",value:x,onChange:t=>v(t.target.value),children:[e.jsx("option",{value:"",children:"Lead: All"}),B.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsx(C,{className:"absolute right-3 top-3.5 h-4 w-4 text-slate-400 pointer-events-none"})]})]})]}),e.jsx("div",{className:"bg-transparent md:bg-white rounded-2xl md:shadow-sm md:border border-slate-200 overflow-hidden",children:E?e.jsxs("div",{className:"p-12 text-center bg-white rounded-2xl shadow-sm",children:[e.jsx(Loader2,{className:"w-10 h-10 animate-spin mx-auto text-blue-500 mb-4"}),e.jsx("p",{className:"text-slate-500",children:"Loading schedule..."})]}):p.length===0?e.jsxs("div",{className:"p-16 text-center bg-white rounded-2xl shadow-sm",children:[e.jsx("div",{className:"bg-slate-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(S,{className:"w-10 h-10 text-slate-300"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-700",children:"No programs found"}),e.jsx("p",{className:"text-slate-400",children:"Try adjusting your filters or search terms."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:hidden space-y-4",children:p.map(t=>e.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-slate-100 relative group active:scale-[0.99] transition-transform",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-50 text-blue-600 p-2 rounded-xl shadow-sm",children:e.jsx(b,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-bold text-slate-800",children:new Date(t.date).toLocaleDateString(void 0,{month:"short",day:"numeric"})}),e.jsx("div",{className:"text-xs text-slate-400 font-medium uppercase tracking-wide",children:new Date(t.date).toLocaleDateString(void 0,{weekday:"long"})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{r(t),i(!0)},className:"p-2 bg-slate-50 text-slate-400 hover:text-blue-600 rounded-full transition-colors",children:e.jsx(D,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>y(t.id),className:"p-2 bg-slate-50 text-slate-400 hover:text-red-600 rounded-full transition-colors",children:e.jsx(M,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"flex items-start gap-2 mb-1",children:[e.jsx("div",{className:"mt-1 opacity-70 scale-90",children:k(t.activity_description)}),e.jsx("h3",{className:"font-bold text-base text-slate-800 leading-snug",children:t.activity_description})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-slate-50",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600",children:[e.jsx(L,{className:"w-3 h-3 text-slate-400"}),e.jsx("span",{className:"truncate max-w-[120px]",children:t.venue||"TBA"})]}),t.lead&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-bold bg-indigo-50 text-indigo-700 border border-indigo-100",children:t.lead})]})]},t.id))}),e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-slate-100",children:[e.jsx("thead",{className:"bg-slate-50/80",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Activity"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Venue"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Lead"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-slate-100",children:p.map((t,a)=>e.jsxs("tr",{className:"hover:bg-slate-50/80 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-50 text-blue-600 p-2 rounded-lg group-hover:bg-blue-100 transition-colors",children:e.jsx(b,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-bold text-slate-700",children:new Date(t.date).toLocaleDateString(void 0,{month:"short",day:"numeric"})}),e.jsx("span",{className:"text-xs text-slate-400 font-medium",children:new Date(t.date).toLocaleDateString(void 0,{weekday:"short"})})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5 opacity-60",children:k(t.activity_description)}),e.jsx("span",{className:"text-sm font-medium text-slate-800 leading-snug",children:t.activity_description})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.venue?e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(L,{className:"w-3.5 h-3.5 text-slate-400"}),t.venue]}):e.jsx("span",{className:"text-xs text-slate-400 italic",children:"--"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.lead?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold bg-indigo-50 text-indigo-700 border border-indigo-100",children:t.lead}):e.jsx("span",{className:"text-xs text-slate-400 italic",children:"--"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsxs("div",{className:"flex justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>{r(t),i(!0)},className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-full transition-colors",title:"Edit",children:e.jsx(D,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>y(t.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"Delete",children:e.jsx(M,{className:"w-4 h-4"})})]})})]},t.id))})]})})]})}),P&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-3xl shadow-2xl w-full max-w-lg overflow-y-auto max-h-[90vh] border border-slate-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-slate-100 pb-4",children:[e.jsx("h3",{className:"text-2xl font-bold text-slate-800",children:s.id?"Edit Event":"New Ministry Event"}),e.jsx("button",{onClick:()=>i(!1),className:"text-slate-400 hover:text-slate-600 p-1 hover:bg-slate-100 rounded-full transition-colors",children:e.jsx(U,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["Date ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("input",{type:"date",className:"w-full border border-slate-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none text-slate-700",value:s.date||"",onChange:t=>r({...s,date:t.target.value})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["Activity Description ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("textarea",{rows:3,className:"w-full border border-slate-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none resize-none text-slate-700",placeholder:"e.g. Sunday Service & Communion",value:s.activity_description||"",onChange:t=>r({...s,activity_description:t.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Venue"}),e.jsx("input",{type:"text",className:"w-full border border-slate-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none text-slate-700",placeholder:"Main Hall",value:s.venue||"",onChange:t=>r({...s,venue:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Lead"}),e.jsx("input",{type:"text",className:"w-full border border-slate-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none text-slate-700",placeholder:"Rev. Minister",value:s.lead||"",onChange:t=>r({...s,lead:t.target.value})})]})]})]}),e.jsxs("div",{className:"mt-8 flex justify-end gap-3 pt-4 border-t border-slate-100",children:[e.jsx("button",{onClick:()=>i(!1),className:"px-6 py-3 text-slate-600 hover:bg-slate-100 rounded-xl font-bold transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:F,className:"px-8 py-3 bg-blue-600 text-white hover:bg-blue-700 rounded-xl font-bold flex items-center shadow-md hover:shadow-lg transition-all transform active:scale-95",children:[e.jsx(K,{className:"w-4 h-4 mr-2"})," Save Event"]})]})]})})]})};export{ve as default};
