import{c as v,r as c,j as e,M as H,X as z,e as I,d as B}from"./index-DjP7dUMH.js";import{s as w}from"./supabaseClient-B6bhcLjp.js";import{A as G}from"./arrow-left-CUR_DFCt.js";import{S as u}from"./star-CMikLwIq.js";import{D as F}from"./database-CL2IrICc.js";import{B as O}from"./book-open-C5XuwULu.js";import{L as D}from"./list-DDubg37g.js";import{S as Y}from"./search-zNlIoLwv.js";/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],q=v("circle-play",P);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],J=v("globe",R);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],W=v("zoom-in",Q);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],K=v("zoom-out",Z),M=a=>{if(!a)return[];const h=a.split(`
`),d=[];let n=[];return h.forEach(m=>{let o=m.trim();if(o.toLowerCase().startsWith("tahoma")||/^[;:,.]+$/.test(o))return;if(/^\d+\.?$/.test(o)||/^[-0-9\s]*(Verse|Stanza|Hymn)\s*\d*/i.test(o)||!o){n.length>0&&(d.push(n),n=[]);return}/^-\d+/.test(o)&&(o=o.replace(/^-\d+/,"").trim()),o&&n.push(o)}),n.length>0&&d.push(n),d},V=a=>{const h=M(a);return h.length>0&&h[0].length>0?h[0][0]:""},p=a=>a==="MHB"||a==="HYMNS"?{gradient:"from-blue-600 to-indigo-600",text:"text-blue-700",bg:"bg-blue-50",border:"border-blue-100"}:a.includes("CANTICLE")?{gradient:"from-purple-600 to-fuchsia-600",text:"text-purple-700",bg:"bg-purple-50",border:"border-purple-100"}:a==="CAN"||a==="LOCAL"||a==="GHANA"?{gradient:"from-teal-500 to-emerald-600",text:"text-teal-700",bg:"bg-teal-50",border:"border-teal-100"}:{gradient:"from-slate-500 to-gray-600",text:"text-slate-700",bg:"bg-slate-50",border:"border-slate-100"},ie=()=>{const[a,h]=c.useState("hymns"),[d,n]=c.useState(""),[m,o]=c.useState([]),[C,f]=c.useState(!1),[S,y]=c.useState(null),[r,j]=c.useState(null),[N,k]=c.useState(20),[b,A]=c.useState({message:"",visible:!1});c.useEffect(()=>{L()},[a]);const L=async()=>{f(!0),y(null);let s=[];a==="hymns"?s=["MHB","General","HYMNS","SONGS"]:a==="canticles"?s=["CANTICLES_EN","CANTICLES_FANTE","CANTICLES","CANTICLE"]:a==="can"&&(s=["CAN","LOCAL","GHANA"]);try{let t=w.from("songs").select("*");a==="favorites"?t=t.eq("is_favorite",!0):a!=="all"&&(t=t.in("collection",s));const{data:l,error:x}=await t.order("number",{ascending:!0});if(x)throw x;l&&o(l)}catch(t){console.error("Error fetching songs:",t);const l=t.message||t.error_description||JSON.stringify(t);y(l)}finally{f(!1)}},T=(()=>{if(!d)return m;const s=d.toLowerCase();return m.filter(t=>t.title.toLowerCase().includes(s)||t.number&&t.number.toString().includes(s)||t.lyrics&&t.lyrics.toLowerCase().includes(s)||t.code&&t.code.toLowerCase().includes(s))})(),_=s=>{A({message:s,visible:!0}),setTimeout(()=>A({...b,visible:!1}),2e3)},E=async(s,t)=>{s.stopPropagation();const l=!t.is_favorite,x=m.map(i=>i.id===t.id?{...i,is_favorite:l}:i);o(a==="favorites"&&!l?m.filter(i=>i.id!==t.id):x),(r==null?void 0:r.id)===t.id&&j({...r,is_favorite:l}),_(l?"Added to Favorites":"Removed from Favorites");try{const{error:i}=await w.from("songs").update({is_favorite:l}).eq("id",t.id);if(i)throw i}catch(i){console.error("Error updating favorite:",i),o(m),_("Error updating favorite")}},$=async()=>{f(!0),y(null);const s=[{id:4130,collection:"MHB",code:"MHB1",number:1,title:"O for a thousand tongues to sing",lyrics:`O for a thousand tongues to sing
My great Redeemer's praise,
The glories of my God and King,
The triumphs of His grace!

My gracious Master and my God,
Assist me to proclaim,
To spread through all the earth abroad
The honours of Thy name.`,is_favorite:!1},{id:4200,collection:"MHB",code:"MHB242",number:242,title:"And Can It Be",lyrics:`And can it be that I should gain
An interest in the Savior's blood?
Died He for me, who caused His pain—
For me, who Him to death pursued?
Amazing love! How can it be,
That Thou, my God, shouldst die for me?`,is_favorite:!0},{id:5001,collection:"CANTICLES_EN",code:"CANT1",number:1,title:"Te Deum Laudamus",lyrics:`We praise You, O God; we acknowledge You to be the Lord.
All the earth worships You, the Father everlasting.
To You all Angels cry aloud; the Heavens and all the Powers therein.`,is_favorite:!1},{id:6001,collection:"CAN",code:"CAN1",number:1,title:"Dɛn na memfa nyi me Nyame ayɛ",lyrics:`Dɛn na memfa nyi me Nyame ayɛ
Me Pomfo kɛse no,
Me Nyame na me Hene, n’enyimnyam,
Na n’adom nkonim no!`,is_favorite:!1}];try{const{error:t}=await w.from("songs").upsert(s);if(t)throw t;alert("Sample data loaded into 'songs' table!"),L()}catch(t){console.error("Seed error:",t);const l=t.message||JSON.stringify(t);alert("Error inserting sample data: "+l),y(l)}finally{f(!1)}},g=({id:s,label:t,icon:l,colorClass:x})=>e.jsxs("button",{onClick:()=>{h(s),n("")},className:`
            relative flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-full text-sm font-bold transition-all duration-300 whitespace-nowrap
            ${a===s?`${x} text-white shadow-md transform scale-100`:"bg-white text-gray-500 hover:bg-gray-50 border border-gray-100 hover:scale-[1.02]"}
        `,children:[e.jsx(l,{className:`w-4 h-4 ${a===s?"text-white":"text-gray-400"}`}),e.jsx("span",{className:"hidden sm:inline",children:t}),e.jsx("span",{className:"sm:hidden",children:t.split(" ")[0]})]});if(r){const s=M(r.lyrics);return e.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-50 flex flex-col animate-fade-in overflow-hidden",children:[e.jsxs("div",{className:"bg-white/90 backdrop-blur-md border-b border-gray-200 px-4 py-3 flex items-center justify-between sticky top-0 z-10 shadow-sm",children:[e.jsxs("button",{onClick:()=>j(null),className:"flex items-center gap-2 text-slate-600 hover:text-slate-900 bg-slate-100 hover:bg-slate-200 px-4 py-2 rounded-full transition-colors font-medium text-sm",children:[e.jsx(G,{className:"w-4 h-4"})," Back"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-slate-100 p-1 rounded-full border border-gray-200 mr-2",children:[e.jsx("button",{onClick:()=>k(Math.max(14,N-2)),className:"p-2 hover:bg-white rounded-full text-slate-600 transition-all",children:e.jsx(K,{className:"w-4 h-4"})}),e.jsx("span",{className:"text-xs font-bold w-8 text-center text-slate-500",children:N}),e.jsx("button",{onClick:()=>k(Math.min(48,N+2)),className:"p-2 hover:bg-white rounded-full text-slate-600 transition-all",children:e.jsx(W,{className:"w-4 h-4"})})]}),e.jsx("button",{onClick:t=>E(t,r),className:`p-2.5 rounded-full transition-all border ${r.is_favorite?"bg-amber-50 text-amber-500 border-amber-200 shadow-sm":"bg-white text-slate-400 border-gray-200 hover:text-slate-600"}`,children:e.jsx(u,{className:`w-5 h-5 ${r.is_favorite?"fill-amber-500":""}`})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"max-w-3xl mx-auto min-h-full bg-white shadow-2xl my-6 md:my-10 rounded-2xl overflow-hidden border border-gray-100",children:[e.jsxs("div",{className:"bg-gradient-to-b from-slate-50 to-white px-8 pt-10 pb-6 text-center border-b border-slate-50",children:[e.jsxs("div",{className:`inline-flex items-center gap-2 px-4 py-1.5 rounded-full mb-4 shadow-sm border ${p(r.collection).bg} ${p(r.collection).border}`,children:[e.jsx("span",{className:`text-xs font-bold tracking-wider uppercase ${p(r.collection).text}`,children:r.code||r.collection}),e.jsxs("span",{className:`text-sm font-black ${p(r.collection).text}`,children:["#",r.number]})]}),e.jsx("h1",{className:"text-3xl md:text-4xl font-serif font-black text-slate-900 leading-tight mb-3",children:r.title}),r.author&&e.jsx("p",{className:"text-slate-500 italic text-sm font-medium",children:r.author})]}),e.jsx("div",{className:"px-8 pb-16 pt-6 md:px-16 md:pb-20",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:s.map((t,l)=>e.jsx("div",{className:"mb-8 last:mb-0 text-center",children:t.map((x,i)=>e.jsx("div",{className:"font-serif text-slate-800",style:{fontSize:`${N}px`,lineHeight:"1.4",marginBottom:"0.4em"},children:x},i))},l))})}),(r.tags||r.copyright)&&e.jsx("div",{className:"bg-slate-50 p-6 text-center text-xs text-slate-400 border-t border-slate-100",children:r.copyright&&e.jsxs("p",{className:"mb-1",children:["© ",r.copyright]})})]})}),e.jsx("div",{className:`fixed bottom-8 left-1/2 transform -translate-x-1/2 z-50 transition-all duration-300 ${b.visible?"opacity-100 translate-y-0":"opacity-0 translate-y-4 pointer-events-none"}`,children:e.jsxs("div",{className:"bg-slate-800 text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-3 font-medium text-sm",children:[e.jsx(u,{className:"w-4 h-4 fill-amber-400 text-amber-400"}),b.message]})})]})}return e.jsxs("div",{className:"h-full flex flex-col bg-slate-50/50",children:[e.jsxs("div",{className:"sticky top-0 z-30 shadow-sm",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-900 via-indigo-900 to-slate-900 text-white pt-6 pb-6 px-4 md:px-6",children:e.jsxs("div",{className:"max-w-5xl mx-auto flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-white/10 rounded-2xl backdrop-blur-sm border border-white/20 shadow-inner",children:e.jsx(H,{className:"w-8 h-8 text-blue-200"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-extrabold tracking-tight text-white",children:"Canticles & Hymns"}),e.jsxs("p",{className:"text-sm md:text-base text-blue-200 font-medium",children:["Methodist Church Ghana • ",m.length," Songs"]})]})]}),e.jsxs("button",{onClick:$,className:"flex items-center gap-2 px-4 py-2 rounded-full border border-white/30 hover:bg-white/10 transition-colors text-xs font-semibold text-blue-100 hover:text-white",children:[e.jsx(F,{className:"w-3 h-3"})," Load Sample"]})]})}),e.jsx("div",{className:"bg-white border-b border-gray-200 px-4 md:px-6 py-4",children:e.jsxs("div",{className:"max-w-5xl mx-auto space-y-4",children:[e.jsxs("div",{className:"flex gap-2 p-1 bg-gray-50 rounded-full border border-gray-100 overflow-x-auto scrollbar-hide",children:[e.jsx(g,{id:"favorites",label:"Favorites",icon:u,colorClass:"bg-gradient-to-r from-amber-500 to-yellow-600"}),e.jsx(g,{id:"hymns",label:"MHB",icon:O,colorClass:"bg-gradient-to-r from-blue-600 to-indigo-600"}),e.jsx(g,{id:"canticles",label:"Canticles",icon:q,colorClass:"bg-gradient-to-r from-purple-600 to-fuchsia-600"}),e.jsx(g,{id:"can",label:"CAN / Local",icon:J,colorClass:"bg-gradient-to-r from-teal-500 to-emerald-600"}),e.jsx(g,{id:"all",label:"All Songs",icon:D,colorClass:"bg-gradient-to-r from-gray-700 to-slate-800"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(Y,{className:"h-5 w-5 text-gray-400 group-focus-within:text-blue-500 transition-colors"})}),e.jsx("input",{type:"text",placeholder:a==="canticles"?"Search Canticles...":"Search by Number, Title, or Lyrics...",className:"block w-full pl-12 pr-4 py-3 bg-slate-50 border-none text-gray-900 placeholder-gray-400 rounded-xl focus:bg-white focus:ring-2 focus:ring-blue-100 focus:shadow-lg transition-all duration-300 text-base shadow-inner",value:d,onChange:s=>n(s.target.value)}),d&&e.jsx("button",{onClick:()=>n(""),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600",children:e.jsx(z,{className:"w-5 h-5 bg-gray-200 rounded-full p-1"})})]})]})})]}),S&&e.jsx("div",{className:"max-w-5xl mx-auto px-4 mt-6",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 flex items-start gap-3 text-red-700 shadow-sm",children:[e.jsx(I,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-sm",children:"Error Loading Songs"}),e.jsx("p",{className:"text-sm mt-1",children:S})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsx("div",{className:"max-w-5xl mx-auto min-h-full",children:C?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[e.jsx(B,{className:"w-10 h-10 animate-spin text-blue-500 mb-4"}),e.jsx("p",{className:"text-slate-400 font-medium",children:"Loading hymnal..."})]}):T.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center px-4",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mb-4",children:a==="favorites"?e.jsx(u,{className:"w-8 h-8 text-slate-300"}):e.jsx(H,{className:"w-8 h-8 text-slate-300"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-700 mb-1",children:a==="favorites"?"No favorites yet":"No songs found"}),e.jsx("p",{className:"text-slate-500 text-sm",children:a==="favorites"?"Star songs to see them here.":"Try searching for something else."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 pb-12",children:T.map(s=>{const t=p(s.collection);return e.jsxs("div",{onClick:()=>j(s),className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 hover:shadow-xl hover:border-blue-100 hover:-translate-y-1 transition-all duration-300 cursor-pointer group flex items-start gap-4 relative",children:[e.jsxs("div",{className:`w-14 h-14 rounded-xl bg-gradient-to-br ${t.gradient} text-white shadow-md flex flex-col items-center justify-center flex-shrink-0`,children:[e.jsx("span",{className:"text-[9px] font-bold uppercase tracking-wider opacity-80",children:s.collection==="CANTICLES_EN"?"CANT":s.collection==="General"?"GEN":s.collection}),e.jsx("span",{className:"text-lg font-black leading-none mt-0.5",children:s.number})]}),e.jsxs("div",{className:"flex-1 min-w-0 py-0.5 pr-8",children:[e.jsx("h3",{className:`text-base font-semibold text-gray-800 group-hover:${t.text} transition-colors truncate mb-1`,children:s.title}),e.jsx("p",{className:"text-xs text-gray-400 font-medium line-clamp-1",children:V(s.lyrics)})]}),e.jsx("button",{onClick:l=>E(l,s),className:`absolute top-4 right-4 p-1.5 rounded-full transition-colors z-10 
                                        ${s.is_favorite?"text-amber-400 hover:bg-amber-50":"text-gray-200 hover:text-amber-400 hover:bg-gray-50"}`,children:e.jsx(u,{className:`w-5 h-5 ${s.is_favorite?"fill-amber-400":""}`})})]},s.id)})})})}),e.jsx("div",{className:`fixed bottom-8 left-1/2 transform -translate-x-1/2 z-50 transition-all duration-300 ${b.visible?"opacity-100 translate-y-0":"opacity-0 translate-y-4 pointer-events-none"}`,children:e.jsxs("div",{className:"bg-slate-800 text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-3 font-medium text-sm",children:[e.jsx(u,{className:"w-4 h-4 fill-amber-400 text-amber-400"}),b.message]})})]})};export{ie as default};
