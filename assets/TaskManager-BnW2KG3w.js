import{c as h,r as i,j as e,a as H,X as V,g as q,H as z}from"./index-DjP7dUMH.js";import{s as c}from"./supabaseClient-B6bhcLjp.js";import{C}from"./circle-check-hWmEiH4g.js";import{P as k}from"./plus-CI59d7vJ.js";import{F as S}from"./funnel-BwZC0Fe8.js";import{P as F}from"./pen-Cr_kg-zM.js";import{T as R}from"./trash-2-BcME0Dqw.js";import{C as U}from"./clock-CtNaSstD.js";import{B as G}from"./book-open-C5XuwULu.js";import{U as W}from"./user-Lgj9eW8Z.js";import{M as X}from"./mic-vocal-Cek0Jw-E.js";/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],T=h("circle",J);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Q=h("message-circle",K);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],Z=h("panels-top-left",Y),b=["Preaching","Visitation","Counseling","Administration","Prayer","Bible Study","Other"],ee=["Low","Medium","High","Critical"],te=["Pending","In Progress","Completed"],ge=()=>{const[m,p]=i.useState([]),[M,f]=i.useState(!0),[P,x]=i.useState(!1),[r,l]=i.useState({title:"",category:"Other",priority:"Medium",status:"Pending",task_date:new Date().toISOString().split("T")[0],description:""}),[n,_]=i.useState("active");i.useEffect(()=>{d()},[]);const d=async()=>{f(!0);const{data:t,error:o}=await c.from("tasks").select("*").order("task_date",{ascending:!0});if(!o&&t){const a=t.map(s=>({...s,title:s.title||s.message||"Untitled Task",category:s.category||"Other",priority:s.priority||"Medium",status:s.status||(s.is_completed?"Completed":"Pending"),message:s.title||s.message}));p(a)}f(!1)},D=async t=>{if(t.preventDefault(),!r.title)return;const o={title:r.title,message:r.title,category:r.category,priority:r.priority,status:r.status,task_date:r.task_date,description:r.description,is_completed:r.status==="Completed",completed_at:r.status==="Completed"?new Date().toISOString():null};if(r.id){const{error:a}=await c.from("tasks").update(o).eq("id",r.id);a||d()}else{const{error:a}=await c.from("tasks").insert([o]);a||d()}u()},O=async t=>{if(!window.confirm("Delete this task?"))return;const{error:o}=await c.from("tasks").delete().eq("id",t);o||d()},B=async(t,o)=>{const{error:a}=await c.from("tasks").update({status:o,is_completed:o==="Completed",completed_at:o==="Completed"?new Date().toISOString():null}).eq("id",t.id);a||(p(m.map(s=>s.id===t.id?{...s,status:o}:s)),d())},g=(t="Other")=>{l({title:"",category:t,priority:"Medium",status:"Pending",task_date:new Date().toISOString().split("T")[0],description:""}),x(!0)},$=t=>{l(t),x(!0)},u=()=>{x(!1),l({})},E=i.useMemo(()=>{const t=m.filter(a=>n==="all"?!0:n==="completed"?a.status==="Completed":a.status!=="Completed"),o={};return b.forEach(a=>o[a]=[]),t.forEach(a=>{o[a.category]?o[a.category].push(a):(o.Other||(o.Other=[]),o.Other.push(a))}),Object.keys(o).forEach(a=>{o[a].sort((s,j)=>{const v=new Date(s.task_date).getTime(),w=new Date(j.task_date).getTime();if(v!==w)return v-w;const N={Critical:0,High:1,Medium:2,Low:3};return N[s.priority]-N[j.priority]})}),o},[m,n]),I=t=>{switch(t){case"Preaching":return{bg:"bg-indigo-50",header:"text-indigo-800",iconBg:"bg-indigo-100",iconColor:"text-indigo-600",border:"border-indigo-100"};case"Visitation":return{bg:"bg-emerald-50",header:"text-emerald-800",iconBg:"bg-emerald-100",iconColor:"text-emerald-600",border:"border-emerald-100"};case"Counseling":return{bg:"bg-rose-50",header:"text-rose-800",iconBg:"bg-rose-100",iconColor:"text-rose-600",border:"border-rose-100"};case"Administration":return{bg:"bg-slate-50",header:"text-slate-700",iconBg:"bg-slate-200",iconColor:"text-slate-600",border:"border-slate-200"};case"Prayer":return{bg:"bg-violet-50",header:"text-violet-800",iconBg:"bg-violet-100",iconColor:"text-violet-600",border:"border-violet-100"};case"Bible Study":return{bg:"bg-amber-50",header:"text-amber-800",iconBg:"bg-amber-100",iconColor:"text-amber-600",border:"border-amber-100"};default:return{bg:"bg-gray-50",header:"text-gray-700",iconBg:"bg-gray-200",iconColor:"text-gray-500",border:"border-gray-200"}}},y=t=>{switch(t){case"Preaching":return e.jsx(X,{className:"w-5 h-5"});case"Visitation":return e.jsx(W,{className:"w-5 h-5"});case"Counseling":return e.jsx(z,{className:"w-5 h-5"});case"Administration":return e.jsx(q,{className:"w-5 h-5"});case"Prayer":return e.jsx(Q,{className:"w-5 h-5"});case"Bible Study":return e.jsx(G,{className:"w-5 h-5"});default:return e.jsx(T,{className:"w-5 h-5"})}},L=t=>{switch(t){case"Critical":return"border-l-red-500";case"High":return"border-l-orange-500";case"Medium":return"border-l-blue-400";case"Low":return"border-l-gray-300";default:return"border-l-gray-200"}},A=t=>{switch(t){case"Critical":return"text-red-600 bg-red-50 border border-red-100";case"High":return"text-orange-600 bg-orange-50 border border-orange-100";case"Medium":return"text-blue-600 bg-blue-50 border border-blue-100";case"Low":return"text-gray-500 bg-gray-100 border border-gray-200"}};return e.jsxs("div",{className:"max-w-[1600px] mx-auto pb-12 animate-fade-in",children:[e.jsxs("div",{className:"relative bg-gradient-to-r from-blue-900 to-slate-800 rounded-3xl p-8 md:p-10 mb-10 shadow-lg text-white overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:e.jsx(Z,{className:"w-64 h-64 text-white"})}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-start md:items-end gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2 text-blue-200 font-semibold tracking-wide uppercase text-sm",children:[e.jsx(C,{className:"w-5 h-5"}),"Ministry Management"]}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-2 tracking-tight",children:"Pastoral Tracker"}),e.jsx("p",{className:"text-blue-100 text-lg md:text-xl font-light max-w-xl opacity-90",children:"Manage preaching, visitation, and ministry duties with care and excellence."})]}),e.jsxs("button",{onClick:()=>g(),className:"bg-white text-blue-900 px-6 py-3 rounded-full hover:bg-blue-50 flex items-center gap-2 font-bold shadow-lg transition-transform active:scale-95 text-lg",children:[e.jsx(k,{className:"w-5 h-5"})," New Task"]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-8",children:[e.jsx("div",{className:"flex items-center gap-2 bg-white p-1.5 rounded-full shadow-sm border border-gray-100",children:["active","completed","all"].map(t=>e.jsx("button",{onClick:()=>_(t),className:`px-6 py-2 rounded-full text-sm font-bold capitalize transition-all duration-300 ${n===t?"bg-slate-800 text-white shadow-md transform scale-105":"text-gray-500 hover:text-gray-800 hover:bg-gray-100"}`,children:t},t))}),e.jsxs("div",{className:"text-gray-400 text-sm font-medium flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4"}),"Showing ",m.filter(t=>n==="all"?!0:n==="completed"?t.status==="Completed":t.status!=="Completed").length," tasks"]})]}),M?e.jsx("div",{className:"flex justify-center py-32 text-gray-400",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{children:"Loading pastoral records..."})]})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 items-start",children:b.map(t=>{const o=E[t],a=I(t);return e.jsxs("div",{className:`rounded-xl p-3 border transition-colors flex flex-col gap-3 min-h-[160px] ${a.bg} ${a.border}`,children:[e.jsxs("div",{className:"flex justify-between items-center px-1 pt-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-xl ${a.iconBg} ${a.iconColor}`,children:y(t)}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-bold text-base leading-none ${a.header}`,children:t}),e.jsxs("span",{className:"text-[11px] font-semibold opacity-60 text-gray-600",children:[o.length," Tasks"]})]})]}),e.jsx("button",{onClick:()=>g(t),className:`w-7 h-7 flex items-center justify-center rounded-full hover:bg-white/50 transition-colors ${a.iconColor}`,children:e.jsx(k,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-2.5 flex-1",children:[o.length===0&&e.jsxs("div",{className:"h-28 flex flex-col items-center justify-center text-center p-3 border-2 border-dashed border-gray-300/50 rounded-xl",children:[e.jsx("div",{className:"opacity-30 mb-2",children:y(t)}),e.jsx("p",{className:"text-gray-400 text-xs font-medium",children:"No tasks yet."}),e.jsx("button",{onClick:()=>g(t),className:"text-[11px] font-bold text-gray-400 hover:text-gray-600 mt-1",children:"Tap + to add"})]}),o.map(s=>e.jsxs("div",{className:`bg-white p-3 rounded-lg shadow-sm hover:shadow-md transition-all group relative border-l-4 ${L(s.priority)} overflow-hidden`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-1.5",children:[e.jsx("div",{className:`text-[10px] font-bold uppercase tracking-wider px-2 py-0.5 rounded-full ${A(s.priority)}`,children:s.priority}),s.task_date&&e.jsxs("span",{className:`text-[11px] font-bold flex items-center gap-1.5 ${new Date(s.task_date)<new Date&&s.status!=="Completed"?"text-rose-500":"text-gray-400"}`,children:[e.jsx(H,{className:"w-3 h-3"}),new Date(s.task_date).toLocaleDateString(void 0,{month:"short",day:"numeric"})]})]}),e.jsx("h3",{className:`font-bold text-gray-800 text-sm mb-0.5 leading-snug ${s.status==="Completed"?"line-through opacity-50":""}`,children:s.title}),s.description&&e.jsx("p",{className:`text-[11px] text-gray-500 line-clamp-1 mb-2 ${s.status==="Completed"?"opacity-50":""}`,children:s.description}),e.jsxs("div",{className:"flex items-center justify-between mt-2 pt-2 border-t border-gray-50",children:[e.jsxs("button",{onClick:()=>B(s,s.status==="Completed"?"Pending":"Completed"),className:`flex items-center gap-1.5 text-[11px] font-bold px-2 py-1 rounded-md transition-colors ${s.status==="Completed"?"bg-green-50 text-green-700":"bg-gray-50 text-gray-500 hover:bg-gray-100"}`,children:[s.status==="Completed"?e.jsx(C,{className:"w-3.5 h-3.5"}):e.jsx(T,{className:"w-3.5 h-3.5"}),s.status==="Completed"?"Done":"Mark Done"]}),e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>$(s),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(F,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:()=>O(s.id),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(R,{className:"w-3.5 h-3.5"})})]})]})]},s.id))]})]},t)})}),P&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-fade-in",children:e.jsx("div",{className:"bg-white w-full max-w-lg rounded-3xl shadow-2xl overflow-hidden border border-gray-100 transform transition-all scale-100",children:e.jsxs("form",{onSubmit:D,children:[e.jsxs("div",{className:"px-8 py-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/50",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xl text-gray-900",children:r.id?"Edit Task":"New Pastoral Task"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Fill in the details below"})]}),e.jsx("button",{type:"button",onClick:u,className:"text-gray-400 hover:text-gray-600 p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(V,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Task Title"}),e.jsx("input",{required:!0,type:"text",className:"w-full border border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all font-medium text-gray-800 placeholder-gray-400",placeholder:"e.g. Prepare Sermon for Sunday",value:r.title,onChange:t=>l({...r,title:t.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Category"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{className:"w-full border border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 outline-none bg-white font-medium appearance-none",value:r.category,onChange:t=>l({...r,category:t.target.value}),children:b.map(t=>e.jsx("option",{value:t,children:t},t))}),e.jsx("div",{className:"absolute right-4 top-3.5 pointer-events-none text-gray-400",children:e.jsx(S,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Due Date"}),e.jsx("input",{type:"date",className:"w-full border border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 outline-none font-medium text-gray-600",value:r.task_date,onChange:t=>l({...r,task_date:t.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Priority"}),e.jsx("select",{className:"w-full border border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 outline-none bg-white font-medium",value:r.priority,onChange:t=>l({...r,priority:t.target.value}),children:ee.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Status"}),e.jsx("select",{className:"w-full border border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 outline-none bg-white font-medium",value:r.status,onChange:t=>l({...r,status:t.target.value}),children:te.map(t=>e.jsx("option",{value:t,children:t},t))})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:["Description ",e.jsx("span",{className:"text-gray-400 font-normal",children:"(Optional)"})]}),e.jsx("textarea",{rows:3,className:"w-full border border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 outline-none resize-none text-gray-700 leading-relaxed",placeholder:"Add specific details, bible verses, or address...",value:r.description||"",onChange:t=>l({...r,description:t.target.value})})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-blue-50 p-4 rounded-xl border border-blue-100",children:[e.jsx("div",{className:"p-2 bg-white rounded-full text-blue-500 shadow-sm",children:e.jsx(U,{className:"w-4 h-4"})}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none text-sm font-medium text-blue-900",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-blue-600 focus:ring-blue-500 border-gray-300"}),"Enable notifications for this task"]})]})]}),e.jsxs("div",{className:"px-8 py-5 bg-gray-50 border-t border-gray-100 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:u,className:"px-6 py-3 text-gray-600 font-bold hover:bg-gray-200 rounded-xl transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-8 py-3 bg-slate-900 text-white font-bold hover:bg-black rounded-xl transition-transform active:scale-95 shadow-md flex items-center gap-2",children:r.id?"Save Changes":"Create Task"})]})]})})})]})};export{ge as default};
