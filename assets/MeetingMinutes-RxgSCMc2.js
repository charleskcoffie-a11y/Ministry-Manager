import{c as S,r as i,j as e,g as X,d as k,X as F,a as Y,e as G}from"./index-DjP7dUMH.js";import{s as g}from"./supabaseClient-B6bhcLjp.js";import{f as Z}from"./geminiService-C5glO8G0.js";import{S as ee}from"./save-Co8uzR3l.js";import{C as m}from"./chevron-up-Cl_4nBal.js";import{C as u}from"./chevron-down-BmpbcB0g.js";import{T as C}from"./trash-2-BcME0Dqw.js";import{P as R}from"./plus-CI59d7vJ.js";import{C as te}from"./circle-check-hWmEiH4g.js";import{W as se}from"./wand-sparkles-Dhyt1bwf.js";/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],ne=S("file-down",ae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],O=S("history",le);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],re=S("refresh-cw",oe),E=()=>({meetingTitle:"",meetingDatetime:new Date().toISOString().slice(0,16),facilitator:"",attendees:"",meetingType:{value:"Circuit",other:""},opening:{purpose:"",notes:""},agendaItems:[{number:1,topic:"",discussionNotes:""}],decisions:"",actionItems:[],prayerPoints:"",closingSummary:{keyTakeaways:"",followUpNeeded:""},nextMeeting:{dateTime:"",agenda:""},id:void 0}),fe=()=>{const[z,b]=i.useState(!1),[T,I]=i.useState(!1),[w,M]=i.useState(null),[j,y]=i.useState(!1),[D,$]=i.useState([]),[p,v]=i.useState(null),[t,l]=i.useState(E()),[U,_]=i.useState(0),[r,A]=i.useState({details:!0,opening:!0,agenda:!0,decisions:!0,actions:!0,prayer:!0,closing:!0,next:!0});i.useEffect(()=>{j&&V()},[j]);const c=s=>{A(a=>({...a,[s]:!a[s]}))},x=(s,a)=>{v({message:s,type:a}),setTimeout(()=>{v(null)},4e3)},V=async()=>{b(!0);const{data:s,error:a}=await g.from("meeting_minutes").select("id, meeting_title, meeting_datetime, meeting_type").order("meeting_datetime",{ascending:!1});s&&$(s),b(!1)},H=async s=>{b(!0);const{data:a,error:o}=await g.from("meeting_minutes").select("*").eq("id",s).single();a&&a.minutes_json?(l({...a.minutes_json,id:a.id}),_(n=>n+1),y(!1),x("Meeting loaded. You can now edit and save changes.","success")):x("Failed to load meeting details.","error"),b(!1)},P=()=>{confirm("Start a new meeting? Unsaved changes will be lost.")&&(l(E()),_(s=>s+1),A({details:!0,opening:!0,agenda:!0,decisions:!0,actions:!0,prayer:!0,closing:!0,next:!0}),x("Started new meeting draft.","success"))},B=async(s,a)=>{if(a.stopPropagation(),!confirm("Are you sure you want to delete this record permanently?"))return;const{error:o}=await g.from("meeting_minutes").delete().eq("id",s);o||($(n=>n.filter(h=>h.id!==s)),t.id===s&&P())},K=async(s,a,o)=>{if(!t.meetingTitle){x("Please enter a meeting title first.","error");return}M(s);const n=await Z(t.meetingTitle,t.meetingType.value==="Other"?t.meetingType.other:t.meetingType.value);n&&o(a+(a?`
`:"")+n),M(null)},L=()=>`
      <html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'>
      <head>
        <meta charset='utf-8'>
        <title>${t.meetingTitle}</title>
        <style>
          body { font-family: 'Times New Roman', serif; font-size: 12pt; }
          h1 { text-align: center; font-size: 16pt; font-weight: bold; margin-bottom: 20px; text-transform: uppercase; }
          h2 { font-size: 14pt; font-weight: bold; margin-top: 15px; background-color: #f0f0f0; padding: 5px; }
          h3 { font-size: 13pt; font-weight: bold; margin-top: 10px; }
          p { margin-bottom: 10px; }
          ul { margin-bottom: 10px; }
          table { width: 100%; border-collapse: collapse; margin-bottom: 15px; }
          th, td { border: 1px solid #ddd; padding: 8px; text-align: left; vertical-align: top; }
          th { background-color: #f9f9f9; font-weight: bold; }
          .meta { margin-bottom: 20px; }
          .meta p { margin: 5px 0; }
        </style>
      </head>
      <body>
        <h1>Meeting Minutes â€“ ${t.meetingTitle}</h1>
        
        <div class="meta">
          <p><strong>Type:</strong> ${t.meetingType.value==="Other"?t.meetingType.other:t.meetingType.value}</p>
          <p><strong>Date & Time:</strong> ${new Date(t.meetingDatetime).toLocaleString()}</p>
          <p><strong>Facilitator:</strong> ${t.facilitator}</p>
          <p><strong>Attendees:</strong> ${t.attendees.replace(/\n/g,", ")}</p>
        </div>

        <h2>1. Opening / Purpose</h2>
        <p><strong>Purpose:</strong> ${t.opening.purpose}</p>
        <p><strong>Notes:</strong><br/>${t.opening.notes.replace(/\n/g,"<br/>")}</p>

        <h2>2. Agenda Items & Discussions</h2>
        ${t.agendaItems.map(s=>`
          <h3>${s.number}. ${s.topic}</h3>
          <p>${s.discussionNotes.replace(/\n/g,"<br/>")}</p>
        `).join("")}

        <h2>3. Decisions Made</h2>
        <p>${t.decisions.replace(/\n/g,"<br/>")}</p>

        <h2>4. Action Items</h2>
        <table>
          <thead>
            <tr>
              <th>Task</th>
              <th>Responsible</th>
              <th>Due Date</th>
              <th>Notes</th>
            </tr>
          </thead>
          <tbody>
            ${t.actionItems.map(s=>`
              <tr>
                <td>${s.task}</td>
                <td>${s.personResponsible}</td>
                <td>${s.dueDate}</td>
                <td>${s.notes}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <h2>5. Prayer Points / Spiritual Insights</h2>
        <p>${t.prayerPoints.replace(/\n/g,"<br/>")}</p>

        <h2>6. Closing Summary</h2>
        <p><strong>Key Takeaways:</strong><br/>${t.closingSummary.keyTakeaways.replace(/\n/g,"<br/>")}</p>
        <p><strong>Follow-up Needed:</strong><br/>${t.closingSummary.followUpNeeded.replace(/\n/g,"<br/>")}</p>

        <h2>7. Next Meeting</h2>
        <p><strong>Date:</strong> ${t.nextMeeting.dateTime?new Date(t.nextMeeting.dateTime).toLocaleString():"TBD"}</p>
        <p><strong>Agenda:</strong><br/>${t.nextMeeting.agenda.replace(/\n/g,"<br/>")}</p>
      </body>
      </html>
    `,q=()=>{const s=L(),a=new Blob(["\uFEFF",s],{type:"application/msword"}),o=URL.createObjectURL(a),n=document.createElement("a"),h=t.meetingTitle.trim().replace(/[^a-z0-9]/gi,"_")||"Meeting_Minutes",f=t.meetingDatetime.split("T")[0],N=`${h}_${f}.doc`;n.href=o,n.download=N,document.body.appendChild(n),n.click(),document.body.removeChild(n)},W=async()=>{if(!t.meetingTitle){x("Please enter a meeting title.","error");return}I(!0);try{const s={meeting_title:t.meetingTitle,meeting_datetime:t.meetingDatetime,meeting_type:t.meetingType.value,meeting_type_other:t.meetingType.other,facilitator:t.facilitator,attendees:t.attendees,minutes_json:t};t.id&&(s.id=t.id);const{data:a,error:o}=await g.from("meeting_minutes").upsert(s).select().single();if(o)throw o;a&&l(n=>({...n,id:a.id}));try{const n=t.meetingTitle.trim().replace(/[^a-z0-9]/gi,"_").toLowerCase(),h=t.meetingDatetime.split("T")[0],f=`${n}_${h}`,N=new Blob([JSON.stringify({...t,id:a==null?void 0:a.id},null,2)],{type:"application/json"});await g.storage.from("meeting-minutes-json").upload(`${f}.json`,N,{upsert:!0});const J=L(),Q=new Blob(["\uFEFF",J],{type:"application/msword"});await g.storage.from("meeting-minutes-json").upload(`${f}.doc`,Q,{upsert:!0})}catch(n){console.warn("Backup storage failed (non-critical):",n)}x("Minutes saved successfully!","success")}catch(s){console.error("Save Error:",s),x("Failed to save: "+s.message,"error")}finally{I(!1)}},d=({section:s,textSetter:a,currentVal:o})=>e.jsx("button",{onClick:()=>K(s,o,a),disabled:!!w,className:`ml-2 p-1 rounded-full hover:bg-purple-100 transition-colors ${w===s?"text-purple-600 animate-pulse":"text-purple-400"}`,title:"AI Assist",children:w===s?e.jsx(k,{className:"w-4 h-4 animate-spin"}):e.jsx(se,{className:"w-4 h-4"})});return e.jsxs("div",{className:"max-w-4xl mx-auto pb-24 animate-fade-in relative",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8 bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-serif font-bold text-slate-800 flex items-center gap-3",children:[e.jsx(X,{className:"w-8 h-8 text-blue-600"}),"Meeting Minutes"]}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Record, organize, and export official ministry minutes."})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 w-full md:w-auto",children:[e.jsxs("button",{onClick:()=>y(!0),className:"flex-1 md:flex-none flex items-center justify-center gap-2 px-4 py-2 bg-slate-50 text-slate-700 rounded-lg hover:bg-slate-100 font-medium transition-colors border border-slate-200",children:[e.jsx(O,{className:"w-4 h-4"})," History"]}),e.jsxs("button",{onClick:P,className:"flex-1 md:flex-none flex items-center justify-center gap-2 px-4 py-2 bg-slate-50 text-slate-700 rounded-lg hover:bg-slate-100 font-medium transition-colors border border-slate-200",children:[e.jsx(re,{className:"w-4 h-4"})," New"]}),e.jsxs("button",{onClick:q,className:"flex-1 md:flex-none flex items-center justify-center gap-2 px-4 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 font-medium transition-colors border border-slate-200",children:[e.jsx(ne,{className:"w-4 h-4"})," Export"]}),e.jsxs("button",{onClick:W,disabled:T,className:"flex-1 md:flex-none flex items-center justify-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-bold shadow-md transition-colors disabled:opacity-50",children:[T?e.jsx(k,{className:"w-4 h-4 animate-spin"}):e.jsx(ee,{className:"w-4 h-4"})," Save"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Meeting Type"}),e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsxs("select",{className:"flex-1 p-3 bg-slate-50 border-none rounded-xl focus:ring-2 focus:ring-blue-500 font-medium text-slate-700",value:t.meetingType.value,onChange:s=>l({...t,meetingType:{...t.meetingType,value:s.target.value}}),children:[e.jsx("option",{value:"Circuit",children:"Circuit Meeting"}),e.jsx("option",{value:"Society",children:"Society Meeting"}),e.jsx("option",{value:"Diocesan",children:"Diocesan Meeting"}),e.jsx("option",{value:"Other",children:"Other"})]}),t.meetingType.value==="Other"&&e.jsx("input",{type:"text",className:"flex-1 p-3 bg-slate-50 border-none rounded-xl focus:ring-2 focus:ring-blue-500",placeholder:"Specify type...",value:t.meetingType.other,onChange:s=>l({...t,meetingType:{...t.meetingType,other:s.target.value}})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("button",{onClick:()=>c("details"),className:"w-full flex justify-between items-center p-4 bg-slate-50 font-bold text-slate-700 hover:bg-slate-100",children:[e.jsx("span",{children:"Meeting Details"}),r.details?e.jsx(m,{className:"w-5 h-5"}):e.jsx(u,{className:"w-5 h-5"})]}),r.details&&e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Meeting Title"}),e.jsx("input",{className:"w-full p-3 bg-slate-50 border-none rounded-xl text-lg font-bold text-slate-800 focus:ring-2 focus:ring-blue-500",placeholder:"e.g. Quarterly Executive Committee",value:t.meetingTitle,onChange:s=>l({...t,meetingTitle:s.target.value})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Date & Time"}),e.jsx("input",{type:"datetime-local",className:"w-full p-3 bg-slate-50 border-none rounded-xl focus:ring-2 focus:ring-blue-500",value:t.meetingDatetime,onChange:s=>l({...t,meetingDatetime:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Facilitator / Lead"}),e.jsx("input",{type:"text",className:"w-full p-3 bg-slate-50 border-none rounded-xl focus:ring-2 focus:ring-blue-500",placeholder:"Name of Chair",value:t.facilitator,onChange:s=>l({...t,facilitator:s.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Attendees"}),e.jsx("textarea",{rows:3,className:"w-full p-3 bg-slate-50 border-none rounded-xl focus:ring-2 focus:ring-blue-500",placeholder:"List names...",value:t.attendees,onChange:s=>l({...t,attendees:s.target.value})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("button",{onClick:()=>c("opening"),className:"w-full flex justify-between items-center p-4 bg-slate-50 font-bold text-slate-700 hover:bg-slate-100",children:[e.jsx("span",{children:"1. Opening / Purpose"}),r.opening?e.jsx(m,{className:"w-5 h-5"}):e.jsx(u,{className:"w-5 h-5"})]}),r.opening&&e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-xs font-bold text-slate-500 uppercase mb-1",children:["Purpose",e.jsx(d,{section:"Opening Purpose",currentVal:t.opening.purpose,textSetter:s=>l({...t,opening:{...t.opening,purpose:s}})})]}),e.jsx("textarea",{rows:2,className:"w-full p-3 bg-slate-50 border-none rounded-xl focus:ring-2 focus:ring-blue-500",value:t.opening.purpose,onChange:s=>l({...t,opening:{...t.opening,purpose:s.target.value}})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-xs font-bold text-slate-500 uppercase mb-1",children:["Key Notes / Opening Remarks",e.jsx(d,{section:"Opening Remarks",currentVal:t.opening.notes,textSetter:s=>l({...t,opening:{...t.opening,notes:s}})})]}),e.jsx("textarea",{rows:3,className:"w-full p-3 bg-slate-50 border-none rounded-xl focus:ring-2 focus:ring-blue-500",placeholder:"- Opening prayer by...",value:t.opening.notes,onChange:s=>l({...t,opening:{...t.opening,notes:s.target.value}})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("button",{onClick:()=>c("agenda"),className:"w-full flex justify-between items-center p-4 bg-slate-50 font-bold text-slate-700 hover:bg-slate-100",children:[e.jsx("span",{children:"2. Agenda Items & Discussions"}),r.agenda?e.jsx(m,{className:"w-5 h-5"}):e.jsx(u,{className:"w-5 h-5"})]}),r.agenda&&e.jsxs("div",{className:"p-6 space-y-6",children:[t.agendaItems.map((s,a)=>e.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-100 relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"bg-blue-100 text-blue-700 text-xs font-bold px-2 py-1 rounded",children:["Item ",a+1]}),e.jsx("button",{onClick:()=>{const o=[...t.agendaItems];o.splice(a,1),l({...t,agendaItems:o})},className:"text-slate-400 hover:text-red-500",children:e.jsx(C,{className:"w-4 h-4"})})]}),e.jsx("input",{className:"w-full p-2 mb-3 border border-slate-200 rounded-lg focus:outline-none focus:border-blue-500 font-bold text-slate-700",placeholder:"Agenda Topic",value:s.topic,onChange:o=>{const n=[...t.agendaItems];n[a].topic=o.target.value,l({...t,agendaItems:n})}}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{rows:3,className:"w-full p-2 border border-slate-200 rounded-lg focus:outline-none focus:border-blue-500 text-sm",placeholder:"Discussion notes...",value:s.discussionNotes,onChange:o=>{const n=[...t.agendaItems];n[a].discussionNotes=o.target.value,l({...t,agendaItems:n})}}),e.jsx("div",{className:"absolute right-2 bottom-2",children:e.jsx(d,{section:`Agenda Item: ${s.topic}`,currentVal:s.discussionNotes,textSetter:o=>{const n=[...t.agendaItems];n[a].discussionNotes=o,l({...t,agendaItems:n})}})})]})]},a)),e.jsxs("button",{onClick:()=>l({...t,agendaItems:[...t.agendaItems,{number:t.agendaItems.length+1,topic:"",discussionNotes:""}]}),className:"w-full py-3 border-2 border-dashed border-slate-200 text-slate-500 rounded-xl hover:border-blue-300 hover:text-blue-600 font-bold flex justify-center items-center gap-2",children:[e.jsx(R,{className:"w-5 h-5"})," Add Agenda Item"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("button",{onClick:()=>c("decisions"),className:"w-full flex justify-between items-center p-4 bg-slate-50 font-bold text-slate-700 hover:bg-slate-100",children:[e.jsx("span",{children:"3. Decisions Made"}),r.decisions?e.jsx(m,{className:"w-5 h-5"}):e.jsx(u,{className:"w-5 h-5"})]}),r.decisions&&e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{rows:4,className:"w-full p-3 bg-slate-50 border-none rounded-xl focus:ring-2 focus:ring-blue-500",placeholder:"- Decision 1...",value:t.decisions,onChange:s=>l({...t,decisions:s.target.value})}),e.jsx("div",{className:"absolute right-2 bottom-2",children:e.jsx(d,{section:"Decisions Made",currentVal:t.decisions,textSetter:s=>l({...t,decisions:s})})})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("button",{onClick:()=>c("actions"),className:"w-full flex justify-between items-center p-4 bg-slate-50 font-bold text-slate-700 hover:bg-slate-100",children:[e.jsx("span",{children:"4. Action Items"}),r.actions?e.jsx(m,{className:"w-5 h-5"}):e.jsx(u,{className:"w-5 h-5"})]}),r.actions&&e.jsxs("div",{className:"p-6 space-y-4",children:[t.actionItems.map((s,a)=>e.jsxs("div",{className:"bg-yellow-50/50 p-4 rounded-xl border border-yellow-100 relative grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("button",{onClick:()=>{const o=[...t.actionItems];o.splice(a,1),l({...t,actionItems:o})},className:"absolute right-2 top-2 text-slate-300 hover:text-red-500",children:e.jsx(C,{className:"w-4 h-4"})}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-yellow-700 uppercase",children:"Task"}),e.jsx("input",{className:"w-full p-2 bg-white border border-yellow-200 rounded-lg text-sm",value:s.task,onChange:o=>{const n=[...t.actionItems];n[a].task=o.target.value,l({...t,actionItems:n})}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-yellow-700 uppercase",children:"Responsible"}),e.jsx("input",{className:"w-full p-2 bg-white border border-yellow-200 rounded-lg text-sm",value:s.personResponsible,onChange:o=>{const n=[...t.actionItems];n[a].personResponsible=o.target.value,l({...t,actionItems:n})}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-yellow-700 uppercase",children:"Due Date"}),e.jsx("input",{type:"date",className:"w-full p-2 bg-white border border-yellow-200 rounded-lg text-sm",value:s.dueDate,onChange:o=>{const n=[...t.actionItems];n[a].dueDate=o.target.value,l({...t,actionItems:n})}})]}),e.jsxs("div",{className:"md:col-span-2 relative",children:[e.jsx("label",{className:"text-xs font-bold text-yellow-700 uppercase",children:"Notes"}),e.jsx("textarea",{rows:2,className:"w-full p-2 bg-white border border-yellow-200 rounded-lg text-sm",value:s.notes,onChange:o=>{const n=[...t.actionItems];n[a].notes=o.target.value,l({...t,actionItems:n})}}),e.jsx("div",{className:"absolute right-2 bottom-2",children:e.jsx(d,{section:`Action Item: ${s.task}`,currentVal:s.notes,textSetter:o=>{const n=[...t.actionItems];n[a].notes=o,l({...t,actionItems:n})}})})]})]},a)),e.jsxs("button",{onClick:()=>l({...t,actionItems:[...t.actionItems,{task:"",personResponsible:"",dueDate:"",notes:""}]}),className:"w-full py-3 border-2 border-dashed border-yellow-200 text-yellow-600 rounded-xl hover:bg-yellow-50 font-bold flex justify-center items-center gap-2",children:[e.jsx(R,{className:"w-5 h-5"})," Add Action Item"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("button",{onClick:()=>c("prayer"),className:"w-full flex justify-between items-center p-4 bg-slate-50 font-bold text-slate-700 hover:bg-slate-100",children:[e.jsx("span",{children:"5. Prayer Points / Spiritual Insights"}),r.prayer?e.jsx(m,{className:"w-5 h-5"}):e.jsx(u,{className:"w-5 h-5"})]}),r.prayer&&e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{rows:4,className:"w-full p-3 bg-slate-50 border-none rounded-xl focus:ring-2 focus:ring-blue-500",placeholder:"Spiritual insights discussed...",value:t.prayerPoints,onChange:s=>l({...t,prayerPoints:s.target.value})}),e.jsx("div",{className:"absolute right-2 bottom-2",children:e.jsx(d,{section:"Prayer Points",currentVal:t.prayerPoints,textSetter:s=>l({...t,prayerPoints:s})})})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("button",{onClick:()=>c("closing"),className:"w-full flex justify-between items-center p-4 bg-slate-50 font-bold text-slate-700 hover:bg-slate-100",children:[e.jsx("span",{children:"6. Closing Summary"}),r.closing?e.jsx(m,{className:"w-5 h-5"}):e.jsx(u,{className:"w-5 h-5"})]}),r.closing&&e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-xs font-bold text-slate-500 uppercase mb-1",children:["Key Takeaways",e.jsx(d,{section:"Key Takeaways",currentVal:t.closingSummary.keyTakeaways,textSetter:s=>l({...t,closingSummary:{...t.closingSummary,keyTakeaways:s}})})]}),e.jsx("textarea",{rows:3,className:"w-full p-3 bg-slate-50 border-none rounded-xl focus:ring-2 focus:ring-blue-500",value:t.closingSummary.keyTakeaways,onChange:s=>l({...t,closingSummary:{...t.closingSummary,keyTakeaways:s.target.value}})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-xs font-bold text-slate-500 uppercase mb-1",children:["Follow-up Needed",e.jsx(d,{section:"Follow-up Needed",currentVal:t.closingSummary.followUpNeeded,textSetter:s=>l({...t,closingSummary:{...t.closingSummary,followUpNeeded:s}})})]}),e.jsx("textarea",{rows:3,className:"w-full p-3 bg-slate-50 border-none rounded-xl focus:ring-2 focus:ring-blue-500",value:t.closingSummary.followUpNeeded,onChange:s=>l({...t,closingSummary:{...t.closingSummary,followUpNeeded:s.target.value}})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("button",{onClick:()=>c("next"),className:"w-full flex justify-between items-center p-4 bg-slate-50 font-bold text-slate-700 hover:bg-slate-100",children:[e.jsx("span",{children:"7. Next Meeting"}),r.next?e.jsx(m,{className:"w-5 h-5"}):e.jsx(u,{className:"w-5 h-5"})]}),r.next&&e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Date & Time"}),e.jsx("input",{type:"datetime-local",className:"w-full p-3 bg-slate-50 border-none rounded-xl focus:ring-2 focus:ring-blue-500",value:t.nextMeeting.dateTime,onChange:s=>l({...t,nextMeeting:{...t.nextMeeting,dateTime:s.target.value}})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-xs font-bold text-slate-500 uppercase mb-1",children:["Next Agenda (if known)",e.jsx(d,{section:"Next Meeting Agenda",currentVal:t.nextMeeting.agenda,textSetter:s=>l({...t,nextMeeting:{...t.nextMeeting,agenda:s}})})]}),e.jsx("textarea",{rows:3,className:"w-full p-3 bg-slate-50 border-none rounded-xl focus:ring-2 focus:ring-blue-500",value:t.nextMeeting.agenda,onChange:s=>l({...t,nextMeeting:{...t.nextMeeting,agenda:s.target.value}})})]})]})]})]},U),j&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden max-h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-slate-50",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5"})," Saved Meetings"]}),e.jsx("button",{onClick:()=>y(!1),className:"text-slate-400 hover:text-slate-600 p-2 hover:bg-slate-200 rounded-full",children:e.jsx(F,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-slate-50/50",children:z?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(k,{className:"w-8 h-8 animate-spin text-blue-500"})}):D.length===0?e.jsx("div",{className:"text-center py-12 text-slate-400",children:"No saved meetings found."}):D.map(s=>e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm hover:border-blue-300 transition-all flex justify-between items-center group",children:[e.jsxs("div",{onClick:()=>H(s.id),className:"cursor-pointer flex-1",children:[e.jsx("h4",{className:"font-bold text-slate-800",children:s.meeting_title}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500 mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Y,{className:"w-3 h-3"})," ",new Date(s.meeting_datetime).toLocaleDateString()]}),e.jsx("span",{className:"bg-blue-50 text-blue-600 px-2 py-0.5 rounded",children:s.meeting_type})]})]}),e.jsx("button",{onClick:a=>B(s.id,a),className:"p-2 text-slate-300 hover:text-red-500 rounded-full hover:bg-red-50 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(C,{className:"w-4 h-4"})})]},s.id))})]})}),e.jsx("div",{className:`fixed bottom-8 left-1/2 transform -translate-x-1/2 z-50 transition-all duration-300 ${p?"opacity-100 translate-y-0":"opacity-0 translate-y-4 pointer-events-none"}`,children:p&&e.jsxs("div",{className:`px-6 py-3 rounded-full shadow-2xl flex items-center gap-3 font-medium text-sm border ${p.type==="success"?"bg-slate-800 text-white border-slate-700":"bg-red-50 text-red-700 border-red-200"}`,children:[p.type==="success"?e.jsx(te,{className:"w-4 h-4 text-green-400"}):e.jsx(G,{className:"w-4 h-4 text-red-500"}),p.message,e.jsx("button",{onClick:()=>v(null),className:"ml-2 hover:opacity-70",children:e.jsx(F,{className:"w-4 h-4"})})]})})]})};export{fe as default};
